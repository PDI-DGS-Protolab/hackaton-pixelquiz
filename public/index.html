<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  </head>
  <body>
    <div>
      <div id="question"></div>
      <div id="questionImage"></div>
      <input id="response"/>
      <input id="final"/>
    </div>
    <div>
      <ul id="images"/>
    </div>
    <script>
        $("#response").keypress(function(e) {
          if(e.which == 13) {
              socket.emit('send_response', $("#response").val());
          }
        });
        $("#final").keypress(function(e) {
          if(e.which == 13) {
              socket.emit('final_response', $("#final").val());
          }
        });
        var socket = io.connect();
        socket.on('ready', function (data) {
          $("#questionImage").text(data);
          socket.emit('send_response', "");
        });
        socket.on('new_question', function (question) {
          if(!question){
            $("#question").text("Terminado, resuelve la imagen!!");
            return;
          }
          $("#question").text(question.question);
          $("#response").val("");
          $("#images").append('<li style="display:inline;"><img src="data:image/jpg;base64,'+ question.image +'"/></li>');
        });
        socket.on('no_correct', function () {
          alert('NO CORRECT');
        });
        socket.on('win', function () {
          alert('GANASTE!!');
        });
        socket.on('lose', function(){
          alert('PERDISTE!!');
        });
        socket.on('quit', function(){
          alert('Tu oponente se ha retirado');
        });
    </script>
  </body>
</html>
